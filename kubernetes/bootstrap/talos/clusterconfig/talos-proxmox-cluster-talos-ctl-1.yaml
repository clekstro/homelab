version: v1alpha1
debug: false
persist: true
machine:
  type: controlplane
  token: 6tru38.97ays9tglald9zrb
  ca:
    crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJQakNCOGFBREFnRUNBaEFweEs3d0Rya3o5UnJDRGJoUDVlc2FNQVVHQXl0bGNEQVFNUTR3REFZRFZRUUsKRXdWMFlXeHZjekFlRncweU5EQTRNRFF4TlRNMk1qRmFGdzB6TkRBNE1ESXhOVE0yTWpGYU1CQXhEakFNQmdOVgpCQW9UQlhSaGJHOXpNQ293QlFZREsyVndBeUVBYk9QWjNhR1h4bkdJckxmdmtJN2NGSDVJb25ra0ltNkUvdElHCk1kVEhGUytqWVRCZk1BNEdBMVVkRHdFQi93UUVBd0lDaERBZEJnTlZIU1VFRmpBVUJnZ3JCZ0VGQlFjREFRWUkKS3dZQkJRVUhBd0l3RHdZRFZSMFRBUUgvQkFVd0F3RUIvekFkQmdOVkhRNEVGZ1FVeVdHSjNCeVgrOWhMZmdWKwpJTHE0SjNQaVZRTXdCUVlESzJWd0EwRUFPUWQ4bWRkRzYyeXgwSmtzc1pFRXBraitoZXR5WWN2Y0lBL1hNLzhiCjI2RXBaTE1QK2VjbUZraVBIYWJXbkFwM0ZoWjBUc1ZIZCt1VmRYK2pCbUVQQ1E9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    key: LS0tLS1CRUdJTiBFRDI1NTE5IFBSSVZBVEUgS0VZLS0tLS0KTUM0Q0FRQXdCUVlESzJWd0JDSUVJSjdESjdJQngxendTRVBvUW9tRzBKMzc5U3pQSG4renA2UERwczFIOEFhdAotLS0tLUVORCBFRDI1NTE5IFBSSVZBVEUgS0VZLS0tLS0K
  certSANs:
    - 10.0.80.196
    - 127.0.0.1
  kubelet:
    image: ghcr.io/siderolabs/kubelet:v1.30.3
    extraArgs:
      rotate-server-certificates: "true"
    extraMounts:
      - destination: /var/openebs/local
        type: bind
        source: /var/openebs/local
        options:
          - bind
          - rshared
          - rw
    defaultRuntimeSeccompProfileEnabled: true
    nodeIP:
      validSubnets:
        - 10.0.80.0/24
    disableManifestsDirectory: true
  network:
    hostname: talos-ctl-1
    interfaces:
      - deviceSelector:
          hardwareAddr: bc:24:11:16:66:ee
        vlans:
          - addresses:
              - 10.0.80.38/24
            routes:
              - network: 0.0.0.0/0
                gateway: 10.0.80.1
            vlanId: 80
            mtu: 1500
            vip:
              ip: 10.0.80.196
    disableSearchDomain: true
  install:
    disk: /dev/sda
    image: factory.talos.dev/installer/e9bf82d988379794152146378e02b097fe5469b20ec8eda14cfb875a9d7eacb7:v1.7.5
    wipe: false
  files:
    - content: |-
        [plugins."io.containerd.grpc.v1.cri"]
          enable_unprivileged_ports = true
          enable_unprivileged_icmp = true
        [plugins."io.containerd.grpc.v1.cri".containerd]
          discard_unpacked_layers = false
        [plugins."io.containerd.grpc.v1.cri".containerd.runtimes.runc]
          discard_unpacked_layers = false
      permissions: 0o0
      path: /etc/cri/conf.d/20-customization.part
      op: create
  sysctls:
    fs.inotify.max_queued_events: "65536"
    fs.inotify.max_user_instances: "8192"
    fs.inotify.max_user_watches: "524288"
    net.core.rmem_max: "2500000"
    net.core.wmem_max: "2500000"
  features:
    rbac: true
    stableHostname: true
    kubernetesTalosAPIAccess:
      enabled: true
      allowedRoles:
        - os:admin
      allowedKubernetesNamespaces:
        - system-upgrade
    apidCheckExtKeyUsage: true
    diskQuotaSupport: true
    kubePrism:
      enabled: true
      port: 7445
    hostDNS:
      enabled: true
      forwardKubeDNSToHost: true
      resolveMemberNames: true
cluster:
  id: ewM0E3o0U0ynJTM3cpqrwndetocnk424nmx36k3I8I0=
  secret: LorLhb/0WZi0qSu9sQH59gcy+hjxL4X6YLPLZI456pc=
  controlPlane:
    endpoint: https://10.0.80.196:6443
  clusterName: talos-proxmox-cluster
  network:
    cni:
      name: none
    dnsDomain: cluster.local
    podSubnets:
      - 10.69.0.0/16
    serviceSubnets:
      - 10.96.0.0/16
  token: qq6dyj.5dyqmkmp5dq0v3au
  secretboxEncryptionSecret: YFl1pPxhRBdtJN5K3cUCuEdCE5E9oUPhmJCch2bo/ZM=
  ca:
    crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJpakNDQVRDZ0F3SUJBZ0lSQVBYVnlNM2VOTHcyQUZLOVV2VURJSVl3Q2dZSUtvWkl6ajBFQXdJd0ZURVQKTUJFR0ExVUVDaE1LYTNWaVpYSnVaWFJsY3pBZUZ3MHlOREE0TURReE5UTTJNakJhRncwek5EQTRNREl4TlRNMgpNakJhTUJVeEV6QVJCZ05WQkFvVENtdDFZbVZ5Ym1WMFpYTXdXVEFUQmdjcWhrak9QUUlCQmdncWhrak9QUU1CCkJ3TkNBQVJ6cGhLVDJNbG51aXBtZHR5c3BKUzdpMTUxWjNZMTcvaVpyeGh1M3VEWHJFRWFtUnZReVlwbEZYU3EKa3doUEt3aVMvUTlFeTZFWVgzUmQyNW04Vk41L28yRXdYekFPQmdOVkhROEJBZjhFQkFNQ0FvUXdIUVlEVlIwbApCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0hRWURWUjBPCkJCWUVGS09JQ0lXRFMwUGQwRG54dStaUE9OVmsvL3JyTUFvR0NDcUdTTTQ5QkFNQ0EwZ0FNRVVDSVFEVXd3ZlEKbnV4Nm9FVisvTTFFd2lnN24vVDlqK0svRmRaZVpsUjVwOGc0andJZ1EyTENwNXhwM2ZsSzJTbkpUaXRYSlhjWQpDYXVDSXhMTTErZ1RtVWlxWTR3PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    key: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSUhOckNPMUZvd3JTYUNURHVmTERqbzMvRUxCcUhDYXFFUmQ3UlREQzRCaXVvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFYzZZU2s5akpaN29xWm5iY3JLU1V1NHRlZFdkMk5lLzRtYThZYnQ3ZzE2eEJHcGtiME1tSwpaUlYwcXBNSVR5c0lrdjBQUk11aEdGOTBYZHVadkZUZWZ3PT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=
  aggregatorCA:
    crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJYekNDQVFXZ0F3SUJBZ0lRSzhOZndlQ3czV2NSRkZmSm5kMGxyVEFLQmdncWhrak9QUVFEQWpBQU1CNFgKRFRJME1EZ3dOREUxTXpZeU1Gb1hEVE0wTURnd01qRTFNell5TUZvd0FEQlpNQk1HQnlxR1NNNDlBZ0VHQ0NxRwpTTTQ5QXdFSEEwSUFCR1lvVm4yaWpKZjVaMGZvM1FITFhTQ1FUTUN2T3NGenRyNVJsNEpkWVRtTzl6dEt2M1FXCjR2di9DUlR1RTBMcUlqQVJ4UURONjJ0U3QyemVROEpoQjNDallUQmZNQTRHQTFVZER3RUIvd1FFQXdJQ2hEQWQKQmdOVkhTVUVGakFVQmdnckJnRUZCUWNEQVFZSUt3WUJCUVVIQXdJd0R3WURWUjBUQVFIL0JBVXdBd0VCL3pBZApCZ05WSFE0RUZnUVV4Z1lyREdlZy9YVnRob1QzbWdIYU1IUS9tMTR3Q2dZSUtvWkl6ajBFQXdJRFNBQXdSUUlnClp4NnJ6MFpVSm9SU1ZQVGM5aktqMHFpVFQ3K01XWEVxMEd1N09VWUZ1ZTRDSVFEWExKa012Rk5TMENlTjVrS0sKbXBqWjYxVzZaRktTVmxBK1JsOHQrSFZIcEE9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
    key: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSURPYThoblNFVy9xMkU3aC9xUUxqaHdTUHlKM25TdzF6dzRneWlTZWFrOWxvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFWmloV2ZhS01sL2xuUitqZEFjdGRJSkJNd0s4NndYTzJ2bEdYZ2wxaE9ZNzNPMHEvZEJiaQorLzhKRk80VFF1b2lNQkhGQU0zcmExSzNiTjVEd21FSGNBPT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=
  serviceAccount:
    key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlKS0FJQkFBS0NBZ0VBMmtYSXpCU1haK0RaTFJSUk95ditsd0hXcTlhOHR4U1VVZGQybVJYUytId1pVZlVxCkJQMWpSbGYwVE9odEtHSVptWkNBVG5iYkVmaHpsNjBTQmxDUmtjQ05hRTRRMU1pVEZEUS9KdXZtL3VZaTRubkwKU1FxUXhwTzlFb1Y1REZZN2FhaGJ1T0dtdTlrTmJTNC9QcVNiL3kzRjRDdW1tRW5Zb2JKYW1UeEY4dkc0aU1FeAo3UWhNcDdBN0U2NHZXbHFFQVZSQ1lBL1lqMVZFMWNSeXR2U0kvV2FiVnpaR3dsTGp5d1RJMXA3eWZ3QXdqQW5OCmhTdkFGTFF6MmwxWERFK082VGxIQllZdjJEUGVZaW05c3Z1UWhmNlZBWWwvVmxucHZiQ2h1SU5yQ3RTV2YyQzQKYjBrRTRIaDBFVjh0RTlwNGxRY013OVVkd1dHL2ZURlZic2NNRGEzc3Q0R29PY3hHTDl0eTA2NFZTMmQ2ZWVKVQo3Wm9VSDhRK2pXQmxhUGpWUUtkR1p3TFpyK2M4alJXalhoUnpXbzRqRVpBZGFmaEthYVZ0cUlBMU56T0w0REZJCndZdy9wcWJ6Snd4ZWRxckhCdFJXUVFoeDY1YXBUME1VRkMrdzhZRWpyUFZ3Z3UrZWJKa0RTUks5bUVmeFo3UFgKdm82bTkzQ0g1bktuU0lOTmFYVzlxK0ZEOC9veU9JQTd5NzZ5SlA4UkdSMTFvTUcrbGxyMldhblRKMTJyekhjSgo5TU5adG9QdFBWdUxYZTZOdFgxay9pdXRZNXJaK2swbW4wNU1ZOS9Dc29uWE53cmNhN2J6UXNPeW1aU0FEWGZ1CmhIWGlMQkNiN29wYU1aTVZXSXduR1VZUVh3VXIvTlNMWnJkcGc0SGptemVlUWxjbmYwMGhVTUwwdzE4Q0F3RUEKQVFLQ0FnQWhUdjdxYmNZQkd5WHBKQzJWT3d4NTNOVDJtaWxvUXVLemJvN3hvNHZ6VVhUSHRnTDRpZlpwV0tpMgpSODNJbU5mUlFHVGtGRzB2MjlzLzdUQlArR0dPZlhUVzB2cnNqY01zRlNFQi9vUGNxQi93c2FkYytSakl4T2pZCmQ3ZldNeDZUN0JZN0sydzNSRk14TXhxQm83c09nTnl1YmRyWmFJTi9nV2tqOHplMWNEKzUxc21ZbzJpWE9tUjUKaDE1QWlvbVVibGhHc29SWXN5bHkrYXlMME50SzJDcWliMnp5NEpWVWVPRnhKd1pZYlIzN2NNK0ZILzBLNjhqeAo3TWFJNFdjc25nb0JoTTJ1VDVRREpOMkcvNjY1VS9WSEs4VmIxeEs5V01RRkZVRHpnU2VLUHFkR2pEMExTRFptCkpFRUx3NDRkSjl0QjB6YmNPTjl3Nm1OZ0tVM2tURjB2NVcxa0t6YnFRek4wUmNTSUFXQmpNazNsbjExbmY5SlAKSVJjNk9NMWZORWhzelo1ZnhnMko5eFJCemU3dTl3ZlJheTlGL01pMzlsbjQ2bmc0bGlWcTNoZUtCZ1lnZGVTSgpOYWxQZVNybnhjeUp5VlJiQkUvdVRlZGdKME5DUEtDdk9scUtoczhnZm1YWlJvVEExUTZLRGFMZVN3aEpqR0ZUCkFQOVJ1Y0U5KzBuL0VTUENQTzNEaE5JSENmSWJTR1d3SDVRdWdpQ3NBcGJPb1JEeTZPRk5PWTVnVEJRU3ErNHoKZUkzekF6Vk9kUzhwcjZtcVUxMElHSVAyMjJWRVVoanl4dTRXR3dsZmQ4THMzUk01bFRCZFZxaitTN0pmK2szQgpIR0dPSWxSTHlPTjMxeVZMWHg5TXpiZ2c4VE12cEpLcmkyUnZ1Q3dUaUYvR0M2L1lNUUtDQVFFQTdubVFpZjNoCm1aNG1UNWl3UnI5SW1qcnYwRGdmUERkV3hIL0VKcUxabEZFcXdISVppM2UrNnpoVGh4RURLY2VsWGJ6SFU1RkEKVXg0MW1PZGVWMnpQM2xaQXIybkpYZGp3bTZvbkxLTG5vaHVkL0Y4NTVZdm96ZjZaaHc0Qm1OWUxCcE5MTFVnVApnNVpLSE1sdGlrbHFiSXVRVi9RZlBleVZvbTBTM2NHUFhHYmw2L1ZxZ3NlRFBCdDRKOXM0dk1LSzh3cVdYYnNDCjNXMkFSa0phcVpWMndaWlBGS2hmVDQxZG4xa21FQ1ZSL1BnTTR5VzRjZklNWnJpODZNMHV3MlNuNjEwby9BU1oKLzFkMmRIRHM3ZWRGQmpFVjlJM2d4YVFiZk9mVGE2N2VpT3NLLzJISTViMXUzSHJOWWtMTXB2aHg5MjlDZkZPdgpqRE5OUGhJWWpQUitDUUtDQVFFQTZsQW5Zd29RVGdTVjNsV1ZKeXNRY3BKdlRjQ09DSmpBS1gvazlvZ3dvVkg5CnZ4eVAzVzlldGJFOHlyN2ZRQ1cxTUtLd1BnT3l4T3ZIOHZyaEVneDl6RW5sV1lUZER5U1VuUUx2eXpDd2JTRTgKY0lzWUZkQ0dsL1RNZUI4MU5NNXI2ODhmL3RjSjE2YjhFMTdBZDVXWnRETFpLLytUbUNGTFkrZCthU1NmalhoZgo4YlZhOW9vUy9MTStIYmd5cU5QWktFa25OS1o0SnovYkMrYjdDVjFOcDRWRmFBWFlxTm90SHdWTVZyT3gzTDE0Cm50QXV5MitzeG0rSDEwZkVrZDFTdy9XYVdWbjR5SGVvK2RxQW9sREhUSEtWd1lVRHRsNWdocWZjR0c2WUZEYksKbzgxT3E4NndRYy9HczRIeTRRR2ZETFk3UGVQU2lsbm0xNDV0bUcwUUp3S0NBUUIwZ0wwbFBQdkhBYVV6dzZOeQpuS2FLZW5xSUhiTGN4eWhEalN1MXVGOVZmeVhFcUxsa0VsY2FNUVZWZWZFeXF3OVZzUkVyK1UwVWpqQ2ZCNEZtCmNvbEcxSnA3VjlJQllDZUQxT2VZZmVsdG45Slo1ZWV5QmR6eExnMnhGaDJmbmduNjUyQ1Z1WjJXN29nOGNnZHEKeEowU2RFaExQNzgza0dvMTFOV2ZzcDBvQmprVFFtMExnUTdUQVpSODNETm12Q0FIeGtkWmVUQllIdFBJLzBldAppNUJkMk9HL2ROWkRWZ3ZEK2xpSEVNUnlNbmlSUys5RTgzd3RmdGtEWHFJVzRRak1DbElvZE5NTEZKNlJHazRWCmw2TjM5K2tDOVlFMjdRcGt4aGphaGE2Lzh4d0hVYTFFMTN2ZWlMdm40ang2NGV0RGQzNWlvTHVsWWJhOXVUZDMKUFVhSkFvSUJBUUNMazBtVERvaWQ0TTloakx0M2hJaWNweXdVTmRLbHZsQWhxR1M4a20zZGV0amJnZWtVNytXTAo5OU1OdHR1SCs2NU9GV3RFMWJFazZvckY2N29zcFRJK2dmcFQ4L2cyc0FTeTd1L21xczg5Z3FIZExJNGhXSUVFCmZiZGJDc1FIKzdwLzBuYnR1Q3pOd0ZQQ09od09ZQmdhSm53RllJNEwvakZKaHJsZmFvaDhuaXNROFlZSS9FREoKTlFDWWRZUC8yNG90SEQ1MWQ0QjFhTzFUenJqVllEWUV4emVMK29lUU5iN1JEcmZsb2M4ZWZlTWZQMFhRdTJwQgpIbWpkell1RGxFSmNKcTVWOFdsb0NSZW9GZ2V3S013L2RyWk1lNjYxY015eENjYnE2dDQrbEZEcmVENFh5OXhrCnA1OW1pTThrUjNIMkFZdVNsMlp3TVpOMzdnak0xcExiQW9JQkFHeXc3bk9OYXBNeHhrNVNLbkNqTEw0K0N1aFIKcUtPOCtCWWpBN3BmWHJhQU95WGprbVZ4eDJPbUFsemt6bGxVeEh4dlFaV0JJY3FsVnMvN0pVZWtXenBkbHVrbApGakFMZ09lRTRpQnEwbFowRUNHN2xZaGFzVWJKSnBadEMrTU5tK0IzT0RQN2dHM0VHVGJwelhhNEZ4OXdPZnAyCmFDcUJyM0ZxQkJXVUhBc0Q3Vnp0K2VoYW5CQVIvMzhNdnlILytndSs3a1d3K01BK1B1d0Rpd0h4YlFMYmQyUzIKRGh4anhaZ2R0QVlyNkU4WVZTa2cyUjQybHpDTnNWN2RPYlBybFRPcHB4ZFNiZmJ3R0JqdWRDbmgvUUhXKzVJTwpRSVQrMjRoOU1HVnJHNEtWZHJ5ZUo5Q3g5QUE0aHEwMEhRVk05S2pOZ080amlBS1RVTE5XYWRFUktKQT0KLS0tLS1FTkQgUlNBIFBSSVZBVEUgS0VZLS0tLS0K
  apiServer:
    image: registry.k8s.io/kube-apiserver:v1.30.3
    certSANs:
      - 10.0.80.196
      - 10.0.80.196
      - 127.0.0.1
    disablePodSecurityPolicy: true
    auditPolicy:
      apiVersion: audit.k8s.io/v1
      kind: Policy
      rules:
        - level: Metadata
  controllerManager:
    image: registry.k8s.io/kube-controller-manager:v1.30.3
    extraArgs:
      bind-address: 0.0.0.0
  proxy:
    disabled: true
    image: registry.k8s.io/kube-proxy:v1.30.3
  scheduler:
    image: registry.k8s.io/kube-scheduler:v1.30.3
    extraArgs:
      bind-address: 0.0.0.0
  discovery:
    enabled: true
    registries:
      kubernetes:
        disabled: false
      service:
        disabled: false
  etcd:
    ca:
      crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJmakNDQVNTZ0F3SUJBZ0lSQVBBTkdzdVMrdEE0M242aHFRRG11cUV3Q2dZSUtvWkl6ajBFQXdJd0R6RU4KTUFzR0ExVUVDaE1FWlhSalpEQWVGdzB5TkRBNE1EUXhOVE0yTWpCYUZ3MHpOREE0TURJeE5UTTJNakJhTUE4eApEVEFMQmdOVkJBb1RCR1YwWTJRd1dUQVRCZ2NxaGtqT1BRSUJCZ2dxaGtqT1BRTUJCd05DQUFTNnFwcVl3N1I1CjBObW9TUk5JSVFIb1BnUEFUOVpHdDZLdnV2ZHM3cUwvcHFDcTdEcFBlZUtPVklYMDhSNks3S3Z2YUNBL05qZ3kKR3NpWktodWIwZnJ4bzJFd1h6QU9CZ05WSFE4QkFmOEVCQU1DQW9Rd0hRWURWUjBsQkJZd0ZBWUlLd1lCQlFVSApBd0VHQ0NzR0FRVUZCd01DTUE4R0ExVWRFd0VCL3dRRk1BTUJBZjh3SFFZRFZSME9CQllFRkIzZWpFWEFaV2xpCjZVcjNTSnZDT2pjVFFBYWlNQW9HQ0NxR1NNNDlCQU1DQTBnQU1FVUNJUURmNDJrNys1ODNhdWFpQ2MweEFiRlQKaW5DWDdmU01KOGx2L3JjK1B5UDFQd0lnWTZ3bnhSK0dpYkU5RnVsUGpyeEZsWXg5QjNJSlFqZ2Ixc3ZzRUNNNwo2Z3c9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
      key: LS0tLS1CRUdJTiBFQyBQUklWQVRFIEtFWS0tLS0tCk1IY0NBUUVFSUNHb0VBWTRIcURXdHdobW1YQjZmRXRGY0pqdTZKaitUOEplVFRQQnp5aFhvQW9HQ0NxR1NNNDkKQXdFSG9VUURRZ0FFdXFxYW1NTzBlZERacUVrVFNDRUI2RDREd0UvV1JyZWlyN3IzYk82aS82YWdxdXc2VDNuaQpqbFNGOVBFZWl1eXI3MmdnUHpZNE1ockltU29ibTlINjhRPT0KLS0tLS1FTkQgRUMgUFJJVkFURSBLRVktLS0tLQo=
    extraArgs:
      listen-metrics-urls: http://0.0.0.0:2381
    advertisedSubnets:
      - 10.0.80.0/24
  coreDNS:
    disabled: true
  allowSchedulingOnControlPlanes: true
